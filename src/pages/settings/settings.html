<section class="page" data-page="settings">
  <h1>Settings</h1>
  <p class="muted">Configure AutoService behavior.</p>

  <div class="settings-layout">
    <!-- Left sidebar navigation -->
    <aside class="card settings-sidebar">
      <div class="card-title">Sections</div>
      <nav id="settings-nav">
        <button class="shortcut-btn active" data-target="programs">
          Programs
        </button>
        <button class="shortcut-btn" data-target="technician">
          Technician
        </button>
        <button class="shortcut-btn" data-target="network">Network</button>
        <button class="shortcut-btn" data-target="business">Business</button>
      </nav>
    </aside>

    <!-- Right content area -->
    <div id="settings-content">
      <!-- Programs pane -->
      <div class="card settings-pane" data-pane="programs">
        <div class="card-title">
          <span>Programs</span>
        </div>
        <div class="card-body">
          <p class="muted">
            Programs that are required by the automated service runner will show
            here. Add them in the programs section for them to be available in
            the service runner.
          </p>

          <!-- Toolbar with search -->
          <div class="settings-toolbar">
            <input
              id="req-tools-search"
              class="shortcut-search"
              type="search"
              placeholder="Search required tools..."
              autocomplete="off"
            />
          </div>

          <div class="list" id="req-programs-list" aria-live="polite"></div>
        </div>
      </div>
      <!-- Technician pane -->
      <div
        class="card settings-pane"
        data-pane="technician"
        style="display: none"
      >
        <div class="card-title"><span>Technician Links</span></div>
        <div class="card-body">
          <p class="muted">
            Add web tools you use frequently. They appear as tabs on the top
            bar. Data (cookies, localStorage) will persist on the USB via the
            app webview profile.
          </p>

          <!-- Toolbar-style form -->
          <form id="tech-link-form" class="tech-links-toolbar">
            <label class="tech-input-title">
              <span class="muted">Title</span>
              <input
                type="text"
                name="title"
                placeholder="e.g., Password Reset"
                required
                autocomplete="off"
              />
            </label>
            <label class="tech-input-url">
              <span class="muted">URL</span>
              <input
                type="url"
                name="url"
                placeholder="https://..."
                required
                autocomplete="off"
              />
            </label>
            <button type="submit" class="primary">Add</button>
          </form>

          <div class="list" id="tech-links-list" aria-live="polite"></div>
          <dialog id="tech-link-editor" class="program-editor">
            <form method="dialog" id="tech-link-edit-form">
              <h3>Edit Link</h3>
              <label>
                <span class="muted">Title</span>
                <input id="t-edit-title" type="text" required />
              </label>
              <label>
                <span class="muted">URL</span>
                <input id="t-edit-url" type="url" required />
              </label>
              <div class="dialog-actions">
                <button type="button" id="t-edit-cancel" class="ghost">
                  Cancel
                </button>
                <button type="submit" id="t-edit-save">Save</button>
              </div>
            </form>
          </dialog>
        </div>
      </div>

      <!-- Network pane (iperf, ping) -->
      <div class="card settings-pane" data-pane="network" style="display: none">
        <div class="card-title"><span>Network</span></div>
        <div class="card-body">
          <p class="muted">
            Configure network test options used by diagnostics.
          </p>

          <!-- iPerf Settings -->
          <div class="network-form-group">
            <form id="iperf-settings-form">
              <label>
                <span class="muted">iPerf Server IP/Host</span>
                <input
                  type="text"
                  name="iperf_server"
                  id="iperf-server-input"
                  placeholder="e.g., 192.168.0.34"
                  autocomplete="off"
                />
              </label>
              <button type="submit" class="primary">Save</button>
            </form>
            <div id="iperf-settings-status"></div>
          </div>

          <hr />

          <!-- Ping Settings -->
          <div class="network-form-group">
            <form id="ping-settings-form">
              <label>
                <span class="muted">Ping Host</span>
                <input
                  type="text"
                  name="ping_host"
                  id="ping-host-input"
                  placeholder="e.g., 8.8.8.8"
                  autocomplete="off"
                />
              </label>
              <button type="submit" class="primary">Save</button>
            </form>
            <div id="ping-settings-status"></div>
          </div>
        </div>
      </div>

      <!-- Business pane (technician mode, logo, business name) -->
      <div
        class="card settings-pane"
        data-pane="business"
        style="display: none"
      >
        <div class="card-title"><span>Business Information</span></div>
        <div class="card-body">
          <p class="muted">
            Configure business branding for customer-facing reports and prints.
          </p>

          <!-- Technician Mode Toggle -->
          <label class="business-settings-toggle">
            <input type="checkbox" id="technician-mode-toggle" />
            <div class="toggle-text">
              <div class="toggle-title">Enable Technician Mode</div>
              <div class="muted toggle-description">
                Show business branding on customer reports and prints
              </div>
            </div>
          </label>

          <hr />

          <!-- Business Logo -->
          <label
            id="business-logo-label"
            class="business-field business-logo-field"
          >
            <span class="muted">Business Logo</span>
            <div class="business-logo-input-row">
              <input
                type="text"
                id="business-logo-input"
                name="business_logo"
                placeholder="Click Browse to select an image file..."
                autocomplete="off"
                readonly
              />
              <button type="button" id="business-logo-browse-btn" class="ghost">
                Browse...
              </button>
            </div>
            <span class="muted field-hint">
              Select any image file from anywhere on your computer - it will be
              embedded in settings
            </span>
          </label>

          <!-- Business Name -->
          <label id="business-name-label" class="business-field">
            <span class="muted">Business Name</span>
            <input
              type="text"
              id="business-name-input"
              name="business_name"
              placeholder="e.g. Tech Solutions LLC"
              autocomplete="off"
            />
            <span class="muted field-hint">
              Your business name will appear on customer reports
            </span>
          </label>

          <!-- Business Address -->
          <label id="business-address-label" class="business-field">
            <span class="muted">Business Address</span>
            <input
              type="text"
              id="business-address-input"
              name="business_address"
              placeholder="e.g. 42 Test Avenue, Exampleville VIC 3000"
              autocomplete="off"
            />
          </label>

          <!-- Business Phone -->
          <label id="business-phone-label" class="business-field">
            <span class="muted">Phone Number</span>
            <input
              type="text"
              id="business-phone-input"
              name="business_phone"
              placeholder="e.g. 03 9123 4567"
              autocomplete="off"
            />
          </label>

          <!-- Business Email -->
          <label id="business-email-label" class="business-field">
            <span class="muted">Email Address</span>
            <input
              type="email"
              id="business-email-input"
              name="business_email"
              placeholder="e.g. admin@techrepairs.com.au"
              autocomplete="off"
            />
          </label>

          <!-- Business Website -->
          <label id="business-website-label" class="business-field">
            <span class="muted">Website</span>
            <input
              type="text"
              id="business-website-input"
              name="business_website"
              placeholder="e.g. www.techrepairs.com.au"
              autocomplete="off"
            />
          </label>

          <!-- Business TFN -->
          <label id="business-tfn-label" class="business-field">
            <span class="muted">TFN (Tax File Number)</span>
            <input
              type="text"
              id="business-tfn-input"
              name="business_tfn"
              placeholder="e.g. 123 456 789"
              autocomplete="off"
            />
          </label>

          <!-- Business ABN -->
          <label id="business-abn-label" class="business-field">
            <span class="muted">ABN (Australian Business Number)</span>
            <input
              type="text"
              id="business-abn-input"
              name="business_abn"
              placeholder="e.g. 12 345 678 901"
              autocomplete="off"
            />
          </label>

          <!-- Save Button -->
          <div class="business-settings-actions">
            <button type="button" id="business-settings-save" class="primary">
              Save Business Settings
            </button>
            <div id="business-settings-status" class="muted"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Page logic handled by settings.js controller (initPage) -->
</section>
