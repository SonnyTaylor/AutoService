<section class="page" data-page="service-run">
  <div class="run-header">
    <div class="titles">
      <h1 id="svc-run-title">Build Run Queue</h1>
      <p class="muted" id="svc-run-desc">Loading preset...</p>
      <div id="svc-total-time" class="total-time-estimate" style="margin-top: 8px; display: none;">
        <span class="time-label">Estimated time:</span>
      </div>
    </div>
    <div class="run-actions">
      <button id="svc-run-back" class="ghost">
        <i class="ph ph-arrow-left" aria-hidden="true"></i> Back
      </button>
      <button id="svc-run-next" disabled>
        Next <i class="ph ph-arrow-right" aria-hidden="true"></i>
      </button>
    </div>
  </div>

  <div class="builder-layout" id="svc-run-builder" hidden>
    <div class="task-palette">
      <div class="palette-header">
        <h2 class="section-title">Tasks</h2>
        <p class="muted small">Toggle & drag to set execution order.</p>
      </div>
      <div class="palette-actions search-row" aria-label="Search tasks">
        <div class="search-wrapper">
          <i class="ph ph-magnifying-glass search-icon" aria-hidden="true"></i>
          <input
            id="svc-search"
            type="search"
            placeholder="Search tasksâ€¦"
            aria-label="Search tasks"
            class="text-input search-input"
          />
          <button
            id="svc-search-clear"
            class="search-clear-btn"
            aria-label="Clear search"
            title="Clear search"
            style="display: none;"
          >
            <i class="ph ph-x" aria-hidden="true"></i>
          </button>
        </div>
      </div>
      <div class="palette-actions action-buttons" aria-label="Selection helpers">
        <button id="svc-ai-create" class="ghost small ai-create-btn" title="Use AI to create a service plan based on your problem description">
          <i class="ph ph-robot" aria-hidden="true"></i> AI Create
        </button>
        <div class="button-group">
          <button id="svc-select-all" class="ghost small">Select All</button>
          <button id="svc-deselect-all" class="ghost small">Deselect All</button>
          <button id="svc-reset" class="ghost small">Reset</button>
        </div>
      </div>
      <ul
        id="svc-task-palette"
        class="task-list"
        aria-label="Available service tasks"
      ></ul>
    </div>
    <div class="task-preview">
      <div class="preview-header">
        <h2 class="section-title">Options</h2>
      </div>
      <div class="ai-summary-toggle">
        <label class="toggle-label">
          <input type="checkbox" id="svc-ai-summary-toggle" />
          <div class="toggle-content">
            <div class="toggle-title">
              <i class="ph ph-sparkle" aria-hidden="true"></i> Generate AI Summary
            </div>
            <div class="muted small toggle-description">
              Create a customer-friendly summary of changes and fixes
            </div>
          </div>
        </label>
        <div id="svc-ai-summary-warning" class="ai-warning" style="display: none;">
          <i class="ph ph-warning" aria-hidden="true"></i>
          <span>AI not configured. Configure in Settings to enable.</span>
        </div>
      </div>
      <div class="ai-summary-toggle">
        <label class="toggle-label">
          <input type="checkbox" id="svc-system-restore-toggle" />
          <div class="toggle-content">
            <div class="toggle-title">
              <i class="ph ph-arrow-counter-clockwise" aria-hidden="true"></i> Create System Restore Point
            </div>
            <div class="muted small toggle-description">
              Create a restore point before running tasks
            </div>
          </div>
        </label>
      </div>
      <div class="ai-summary-toggle">
        <label class="toggle-label">
          <input type="checkbox" id="svc-pause-between-toggle" />
          <div class="toggle-content">
            <div class="toggle-title">
              <i class="ph ph-hand-palm" aria-hidden="true"></i> Pause after each task
            </div>
            <div class="muted small toggle-description">
              Require manual resume between tasks
            </div>
          </div>
        </label>
      </div>
    </div>
  </div>
</section>
<script type="module" src="./builder.js"></script>
